<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="cn.jeeweb.web.ebp.chargeback.mapper.TChargeBackRecordMapper" >



    <!--  查询允许退单的任务单列表-->
  <select id="getCanChargeBackTaskList" resultType="cn.jeeweb.web.ebp.chargeback.entity.CanChargeBackTask">
	 SELECT
		buytd.id buyerTaskId,buytd.buyerid buyerId,buytd.jdorderno ecommerceOrderNo,buytd.taskid shopTaskId,buytd.taskstate buyTaskStatus,
  		buytd.receivingdate receivingdate,
		buy.buyerName,buy.loginName buyerNo,buyt.mytaskNo buyerTaskNo,
		sttb.taskno shopTaskNo,sttb.shopId,sttb.t_title goodsName,
		shoptb.shopName
	FROM
		t_my_task_detail buytd
		INNER JOIN t_my_task buyt ON buytd.mytaskid = buyt.id
		INNER JOIN t_task_base sttb ON sttb.id = buytd.taskid
		INNER JOIN t_buyer_info buy ON buy.userid = buytd.buyerid
		INNER JOIN t_shop_info shoptb ON shoptb.userid = sttb.shopId
	  <if test="ew.sqlSegment != '' and ew.sqlSegment != null">
		  <where>
			  ${ew.sqlSegment}
		  </where>
	  </if>
  </select>

</mapper>